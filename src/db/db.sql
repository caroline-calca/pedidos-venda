--- CRIAR ESTRUTURA ---

CREATE TABLE CLIENTE (
        CODIGO INTEGER NOT NULL PRIMARY KEY,
        NOME VARCHAR(100),
        CIDADE VARCHAR(60),
        UF CHAR(2)
      );

CREATE TABLE PRODUTO (
        CODIGO INTEGER NOT NULL PRIMARY KEY,
        DESCRICAO VARCHAR(100),
        PRECO_VENDA NUMERIC(15,2)
      );

CREATE TABLE PEDIDO (
        NUMERO_PEDIDO INTEGER NOT NULL PRIMARY KEY,
        DATA_EMISSAO DATE,
        CODIGO_CLIENTE INTEGER,
        VALOR_TOTAL NUMERIC(15,2)
      );

CREATE TABLE PEDIDO_ITEM (
        ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        NUMERO_PEDIDO INTEGER,
        CODIGO_PRODUTO INTEGER,
        QUANTIDADE NUMERIC(15,2),
        VLR_UNITARIO NUMERIC(15,2),
        VLR_TOTAL NUMERIC(15,2)
      );

COMMIT;

CREATE SEQUENCE GEN_PEDIDO;

CREATE INDEX IDX_PEDIDO_CLIENTE ON PEDIDO (CODIGO_CLIENTE);
CREATE INDEX IDX_ITEM_PEDIDO ON PEDIDO_ITEM (NUMERO_PEDIDO);
CREATE INDEX IDX_ITEM_PRODUTO ON PEDIDO_ITEM (CODIGO_PRODUTO);

ALTER TABLE PEDIDO 
      ADD CONSTRAINT FK_PEDIDO_CLIENTE 
      FOREIGN KEY (CODIGO_CLIENTE) 
      REFERENCES CLIENTE (CODIGO);

ALTER TABLE PEDIDO_ITEM 
      ADD CONSTRAINT FK_ITEM_PEDIDO 
      FOREIGN KEY (NUMERO_PEDIDO) 
      REFERENCES PEDIDO (NUMERO_PEDIDO) 
      ON DELETE CASCADE;

ALTER TABLE PEDIDO_ITEM 
      ADD CONSTRAINT FK_ITEM_PRODUTO 
      FOREIGN KEY (CODIGO_PRODUTO) 
      REFERENCES PRODUTO (CODIGO);

COMMIT;

--- INJETAR DADOS ---

-- Tabela CLIENTE
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (1, 'Miguel', 'Sao Paulo', 'SP');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (2, 'Helena', 'Rio de Janeiro', 'RJ');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (3, 'Arthur', 'Belo Horizonte', 'MG');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (4, 'Alice', 'Brasilia', 'DF');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (5, 'Benicio', 'Salvador', 'BA');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (6, 'Laura', 'Fortaleza', 'CE');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (7, 'Theo', 'Sao Paulo', 'SP');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (8, 'Manuela', 'Sao Paulo', 'SP');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (9, 'Heitor', 'Sao Paulo', 'SP');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (10, 'Sophia', 'Manaus', 'AM');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (11, 'Davi', 'Rio de Janeiro', 'RJ');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (12, 'Isabella', 'Rio de Janeiro', 'RJ');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (13, 'Bernardo', 'Sao Paulo', 'SP');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (14, 'Luisa', 'Curitiba', 'PR');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (15, 'Noah', 'Recife', 'PE');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (16, 'Cecilia', 'Goiania', 'GO');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (17, 'Gabriel', 'Sao Paulo', 'SP');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (18, 'Maite', 'Belem', 'PA');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (19, 'Samuel', 'Porto Alegre', 'RS');
INSERT INTO CLIENTE (CODIGO, NOME, CIDADE, UF) VALUES (20, 'Eloa', 'Guarulhos', 'SP');
COMMIT;

-- Tabela PRODUTO
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (1, 'Arroz', 24.99);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (2, 'Feijao', 9.90);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (3, 'Cafe', 11.90);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (4, 'Macarrao', 3.55);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (5, 'Farinha de trigo', 6.50);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (6, 'Ovo', 0.90);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (7, 'Salgadinho', 9.90);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (8, 'Refrigerante 2l', 7.30);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (9, 'Chocolate', 5.40);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (10, 'Miojo', 1.99);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (11, 'Leite', 4.50);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (12, 'Achocolatado', 7.80);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (13, 'Leite em po', 10.20);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (14, 'Vassoura', 10.70);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (15, 'Limpador multiuso', 12.60);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (16, 'Sacos de lixo 50l', 13.80);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (17, 'Bolacha', 2.70);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (18, 'Iogurte', 5.90);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (19, 'Biscoito', 8.60);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (20, 'Oleo', 11.50);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (21, 'Vinagre', 3.90);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (22, 'Sal', 2.30);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (23, 'Acucar', 3.20);
INSERT INTO PRODUTO (CODIGO, DESCRICAO, PRECO_VENDA) VALUES (24, 'Pao de forma', 7.50);
COMMIT;

--- REALIZAR MANUTENÇÃO ---

ALTER TABLE PEDIDO ADD OBSERVACAO VARCHAR(255);
COMMIT;